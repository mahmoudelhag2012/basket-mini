# Basket Mini — لعبة بسيطة بمراحل وسكور (جاهزة للإعلانات)

> نسخة خفيفة جدًا: **مراحل + سكور فقط**، مناسبة لتضمين الإعلانات. تعمل داخل تيليجرام عبر WebApp. لا يوجد متجر/ترقيات.

## ملف واحد: `index.html`

انسخه كما هو وارفعه على استضافة HTTPS (Netlify/Vercel/Cloudflare Pages…).

```html
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basket Mini 🏀</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- AdsGram (اختياري) -->
  <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
  <style>
    :root{ --bg:#0f1115; --card:#171a21; --text:#f5f7fb; --sub:#a0a7b8; --accent:#ffd166; --ok:#2ecc71; --danger:#e74c3c }
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Arial}
    .wrap{max-width:480px;margin:0 auto;padding:14px}
    .top{display:flex;gap:8px}
    .card{flex:1;background:var(--card);border-radius:16px;padding:12px;box-shadow:0 2px 12px rgba(0,0,0,.25)}
    .title{font-weight:800}
    .arena{position:relative;height:360px;margin-top:12px;background:linear-gradient(180deg,#0c1016,#131823);border-radius:18px;overflow:hidden}
    .hoop{position:absolute;top:40px;left:50%;transform:translateX(-50%);width:160px;height:95px;border:10px solid #e3e7ef;border-bottom:none;border-radius:14px 14px 0 0}
    .net{position:absolute;top:130px;left:50%;transform:translateX(-50%);width:110px;height:64px;border:5px solid #ff6a3d;border-top:none;border-radius:0 0 12px 12px}
    .ball{position:absolute;bottom:14px;left:50%;transform:translateX(-50%);width:72px;height:72px;border-radius:50%;background:radial-gradient(circle at 35% 35%,#ff8b3d,#e25822);box-shadow:0 8px 20px rgba(0,0,0,.4)}
    .shoot{animation:shoot 0.85s ease-out}
    @keyframes shoot{0%{bottom:14px;transform:translateX(-50%) scale(1)}50%{bottom:230px;transform:translateX(-50%) scale(0.95)}100%{bottom:115px;transform:translateX(-50%) scale(0.9)}}
    .row{display:flex;justify-content:space-between;align-items:center}
    .btn{background:var(--accent);color:#111;border:none;border-radius:14px;padding:14px 16px;font-weight:800}
    .wide{width:100%;margin-top:10px}
    .muted{color:var(--sub);font-size:12px}
    .center{text-align:center}
    .overlay{position:absolute;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55);}
    .panel{background:#fff;color:#111;padding:16px;border-radius:16px;max-width:85%;text-align:center}
    .panel .btn{background:#111;color:#fff}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div class="card"><div class="muted">المستوى</div><div class="title" id="level">1</div></div>
    <div class="card"><div class="muted">السكور</div><div class="title" id="score">0</div></div>
    <div class="card"><div class="muted">المحاولات</div><div class="title" id="lives">3</div></div>
  </div>

  <div class="arena" id="arena">
    <div class="hoop"></div>
    <div class="net"></div>
    <div class="ball" id="ball"></div>
    <div class="overlay" id="overlay">
      <div class="panel">
        <h3 id="ovTitle">انتهت المحاولات</h3>
        <p id="ovText">إعلان مكافأة للمتابعة؟</p>
        <div class="row" style="gap:8px;justify-content:center">
          <button class="btn" id="continueBtn">متابعة (إعلان)</button>
          <button class="btn" id="restartBtn">اعادة</button>
        </div>
      </div>
    </div>
  </div>

  <button class="btn wide" id="shootBtn">تصويب 🏀</button>
  <div class="center muted">اضغط للتصويب. كل مستوى يحتاج عدد إصابات أكثر.</div>
</div>

<script>
  // Telegram theme (اختياري)
  const tg=window.Telegram?.WebApp; if(tg){ tg.ready(); tg.expand(); }

  // إعدادات اللعبة البسيطة
  const el = id=>document.getElementById(id);
  const levelEl=el('level'), scoreEl=el('score'), livesEl=el('lives');
  const shootBtn=el('shootBtn'), ball=el('ball'), overlay=el('overlay');
  const continueBtn=el('continueBtn'), restartBtn=el('restartBtn');

  let level=1, score=0, lives=3, target=3; // الهدف: إصابات مطلوبة للانتقال
  let rng=()=>Math.random();

  function render(){ levelEl.textContent=level; scoreEl.textContent=score; livesEl.textContent=lives; }
  render();

  function nextLevel(){
    level++; target+=2; // صعوبة أعلى
    // نقطة عرض إعلان بين المراحل (Interstitial)
    if(window.SAD){
      SAD.showInterstitialAd({ blockId: 'YOUR_INTERSTITIAL_BLOCK_ID' }).catch(()=>{});
    }
    render();
  }

  function fail(){
    lives--; render();
    if(lives<=0){ showOverlay('انتهت المحاولات','شاهد إعلان مكافأة للمتابعة بحياة إضافية؟'); }
  }

  function showOverlay(title, text){
    el('ovTitle').textContent=title; el('ovText').textContent=text; overlay.style.display='grid';
  }
  function hideOverlay(){ overlay.style.display='none'; }

  function shoot(){
    // أنيميشن تصويب بسيط
    ball.classList.remove('shoot'); void ball.offsetWidth; ball.classList.add('shoot');
    // احتمالية نجاح تعتمد على المستوى (تصعب تدريجيًا)
    const success = rng() < Math.max(0.2, 0.75 - (level-1)*0.08); // من 75% وتنخفض
    setTimeout(()=>{
      if(success){
        score++; render();
        if(score % target === 0){ nextLevel(); }
      }else{
        fail();
      }
    }, 700);
  }

  shootBtn.onclick=shoot;

  // متابعة عبر إعلان مكافأة
  continueBtn.onclick=()=>{
    if(window.SAD){
      SAD.showRewardedAd({ blockId: 'YOUR_REWARDED_BLOCK_ID' })
        .then(()=>{ lives=1; hideOverlay(); render(); })
        .catch(()=>{});
    } else {
      lives=1; hideOverlay(); render();
    }
  };

  restartBtn.onclick=()=>{ level=1; score=0; lives=3; target=3; hideOverlay(); render(); };
</script>
</body>
</html>
```

### ملاحظات سريعة

* **المحتوى خفيف جدًا**: زر تصويب، احتمال نجاح يتناقص تدريجيًا مع المراحل.
* **المستويات**: كل مستوى يزيد `target` (الإصابات المطلوبة) بمقدار 2.
* **الإعلانات**:

  * بين المراحل: `SAD.showInterstitialAd` (ضع Block ID الخاص بك).
  * عند انتهاء المحاولات: `SAD.showRewardedAd` لمنح حياة إضافية.
* لو لا تريد AdsGram الآن؛ اترك السكربت كما هو وسيعمل بدون إعلان (الكود يتجاوز الأخطاء).

## زر فتح اللعبة من البوت (مرّة واحدة)

استخدم طلب Bot API لإرسال زر يفتح الـ WebApp:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage" \
  -d chat_id=<YOUR_CHAT_ID> \
  -d text='ابدأ Basket Mini 🏀' \
  --data-urlencode 'reply_markup={"inline_keyboard":[[{"text":"ابدأ","web_app":{"url":"https://YOUR-DOMAIN/index.html"}}]]}'
```

> جهّز **YOUR\_INTERSTITIAL\_BLOCK\_ID** و **YOUR\_REWARDED\_BLOCK\_ID** من لوحة AdsGram واستبدلهم في الكود.
