<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basket Mini â€” Pro v3</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0e17; --text:#eef2ff; --muted:#96a0b9;
      --panel:#101824; --panel2:#0f1521; --ring:#ffffff18;
      --rim:#ff7a3c; --glass:#e9f0ffcc;
      --wood1:#905828; --wood2:#a66b36; --wood3:#7a4a22;
      --gold1:#ffd46a; --gold2:#ffb724;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:radial-gradient(1200px 600px at 50% -10%, #1b2540 0%, var(--bg) 60%);color:var(--text);font-family:"Cairo",system-ui}
    .wrap{max-width:540px;margin:0 auto;padding:16px}

    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .badge{background:linear-gradient(180deg,var(--panel),var(--panel2));border-radius:18px;padding:12px 14px;box-shadow:0 8px 24px #0008, inset 0 1px 0 var(--ring)}
    .k{font-size:13px;color:var(--muted)}
    .v{font-weight:800;font-size:22px}

    .arena{position:relative;height:500px;margin:14px 0 10px;border-radius:22px;overflow:hidden;box-shadow:0 24px 60px #000a, inset 0 0 0 1px var(--ring);background:linear-gradient(180deg,#0c1322 0%,#0a0e17 48%, #090d15 100%)}

    /* stadium lights & crowd */
    .crowd{position:absolute;inset:0;background:
      radial-gradient(800px 140px at 50% 20px,#ffffff14 0,#ffffff04 40%,transparent 60%),
      radial-gradient(1200px 200px at 50% 0,#1c2745 0%, transparent 65%);
    }
    .lightbar{position:absolute;left:50%;top:24px;transform:translateX(-50%);width:70%;height:62px;border-radius:40px;background:radial-gradient(280px 34px at 50% 50%, #ffffff66 0, #ffffff15 60%, transparent 75%)}

    /* HOOP: glass backboard + rim + net */
    .hoop{position:absolute;top:110px;left:50%;transform:translateX(-50%);width:300px;height:230px}
    svg{width:100%;height:100%}
    .netGlow{opacity:0;transition:.16s}

    /* COURT wood ellipse */
    .court{position:absolute;left:50%;bottom:-34px;transform:translateX(-50%);width:92%;height:280px;border-radius:50%/22%;overflow:hidden;filter:drop-shadow(0 -10px 32px #000a)}
    .planks{position:absolute;inset:0;background:
      repeating-linear-gradient(90deg,var(--wood1) 0 18px,var(--wood2) 18px 30px,var(--wood3) 30px 48px);
      box-shadow:inset 0 100px 160px #0007;
    }
    .circle{position:absolute;left:50%;bottom:96px;transform:translateX(-50%);width:260px;height:140px;border:4px solid #ffffff22;border-radius:50%}

    /* ball + seams + shadow */
    .ball{position:absolute;left:50%;bottom:42px;transform:translateX(-50%);width:100px;height:100px;border-radius:50%;
      background:
        radial-gradient(38px 38px at 34% 34%, #ffb57c 0%, #ff934d 46%, transparent 47%),
        radial-gradient(130px 130px at 70% 70%, #ff6e22 0%, #d24a0f 70%);
      box-shadow:0 18px 36px #000c, inset -12px -12px 22px #0003;
    }
    .ball:before, .ball:after{content:"";position:absolute;inset:0;border-radius:50%}
    .ball:before{border-top:5px solid #00000055;border-left:5px solid #00000055;opacity:.55;filter:blur(.2px)}
    .ball:after{background:radial-gradient(120px 120px at 30% 30%, transparent 52%, #00000055 53% 56%, transparent 57%)}
    .shadow{position:absolute;left:50%;bottom:26px;transform:translateX(-50%);width:130px;height:22px;border-radius:50%;background:#00000058;filter:blur(7px)}

    /* motion */
    .ball.up{animation:up .58s cubic-bezier(.25,.65,.2,1) forwards}
    .ball.down{animation:down .44s linear forwards}
    .shadow.up{animation:shrink .58s linear forwards}
    .shadow.down{animation:grow .44s linear forwards}
    @keyframes up{0%{transform:translateX(-50%) translateY(0) scale(1)}60%{transform:translateX(-50%) translateY(-280px) scale(.96)}100%{transform:translateX(-50%) translateY(-180px) scale(.92)}}
    @keyframes down{0%{transform:translateX(-50%) translateY(-180px) scale(.92)}100%{transform:translateX(-50%) translateY(46px) scale(.88)}}
    @keyframes shrink{0%{transform:translateX(-50%) scale(1)}100%{transform:translateX(-50%) scale(.6)}}
    @keyframes grow{0%{transform:translateX(-50%) scale(.6)}100%{transform:translateX(-50%) scale(1.05)}}

    /* UI */
    .btn{width:100%;border:0;background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#1b1100;font-weight:800;font-size:18px;border-radius:16px;padding:14px 16px;box-shadow:0 12px 22px #0007, inset 0 1px 0 #fff7;cursor:pointer}
    .hint{color:var(--muted);text-align:center;font-size:12px;margin-top:8px}

    .overlay{position:absolute;inset:0;display:none;place-items:center;background:#0007;backdrop-filter:blur(2px)}
    .panel{background:linear-gradient(180deg,var(--panel2),var(--panel));border-radius:20px;padding:18px 16px;box-shadow:0 16px 40px #000c;min-width:72%}
    .row{display:flex;gap:10px;margin-top:10px}
    .btn2{flex:1;border:0;border-radius:14px;padding:12px 14px;font-weight:800}
    .go{background:#111;color:#fff}
    .reward{background:#13322d;color:#c7fff5;border:1px solid #2dd4bf55}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="grid3">
      <div class="badge"><div class="k">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div><div class="v" id="level">1</div></div>
      <div class="badge"><div class="k">Ø§Ù„Ø³ÙƒÙˆØ±</div><div class="v" id="score">0</div></div>
      <div class="badge"><div class="k">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</div><div class="v" id="lives">3</div></div>
    </div>

    <div class="arena" id="arena">
      <div class="crowd"></div>
      <div class="lightbar"></div>
      <div class="hoop">
        <svg viewBox="0 0 300 230" xmlns="http://www.w3.org/2000/svg">
          <!-- glass backboard -->
          <rect x="60" y="10" width="180" height="26" rx="13" fill="var(--glass)" />
          <rect x="78" y="36" width="12" height="92" rx="6" fill="#e9eef6"/>
          <rect x="210" y="36" width="12" height="92" rx="6" fill="#e9eef6"/>
          <!-- rim -->
          <path d="M96 132 Q150 154 204 132" stroke="var(--rim)" stroke-width="12" fill="none" stroke-linecap="round"/>
          <!-- net (simple) -->
          <path id="net" d="M116 134 L184 134 L170 188 L130 188 Z" fill="url(#mesh)" stroke="var(--rim)" stroke-width="7" stroke-linejoin="round"/>
          <g class="netGlow"><ellipse cx="150" cy="158" rx="92" ry="40" fill="url(#g)"/></g>
          <defs>
            <radialGradient id="g" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="#ff934e" stop-opacity="1"/>
              <stop offset="100%" stop-color="#ff934e" stop-opacity="0"/>
            </radialGradient>
            <pattern id="mesh" width="12" height="12" patternUnits="userSpaceOnUse">
              <path d="M0 12 L12 0 M-2 2 L2 -2 M10 14 L14 10" stroke="#ffffff3a" stroke-width="1"/>
            </pattern>
          </defs>
        </svg>
      </div>

      <div class="ball" id="ball"></div>
      <div class="shadow" id="shadow"></div>

      <div class="court">
        <div class="planks"></div>
        <div class="circle"></div>
      </div>

      <div class="overlay" id="overlay">
        <div class="panel">
          <h3 id="ovTitle">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</h3>
          <div style="color:var(--muted);font-size:14px" id="ovText">Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† Ù…ÙƒØ§ÙØ£Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ</div>
          <div class="row">
            <button class="btn2 reward" id="continueBtn">Ù…ØªØ§Ø¨Ø¹Ø© (Ø¥Ø¹Ù„Ø§Ù†)</button>
            <button class="btn2 go" id="restartBtn">Ø¥Ø¹Ø§Ø¯Ø©</button>
          </div>
        </div>
      </div>
    </div>

    <button class="btn" id="shootBtn">ØªØµÙˆÙŠØ¨ ğŸ€</button>
    <div class="hint">ØªØµÙˆÙŠØ¨ Ø¨Ø­Ø±ÙƒØ© Swish + Ø¸Ù„ ÙˆÙ…Ø¤Ø«Ø±Ø§Øª. ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰ Ø£ØµØ¹Ø¨.</div>
  </div>

<script>
  const $ = id=>document.getElementById(id);
  const levelEl=$('level'), scoreEl=$('score'), livesEl=$('lives');
  const ball=$('ball'), sh=$('shadow'), shootBtn=$('shootBtn');
  const overlay=$('overlay'), continueBtn=$('continueBtn'), restartBtn=$('restartBtn');
  const netGlow=document.querySelector('.netGlow');

  let level=1, score=0, lives=3, target=3, anim=false;
  const rng=()=>Math.random();
  const RENDER=()=>{ levelEl.textContent=level; scoreEl.textContent=score; livesEl.textContent=lives; };
  RENDER();

  function nextLevel(){ level++; target+=2; RENDER(); }
  function fail(){ lives--; RENDER(); if(lives<=0) showOverlay('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª','Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† Ù…ÙƒØ§ÙØ£Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙÙŠØ©ØŸ'); }

  function shoot(){
    if(anim) return; anim=true;
    ball.classList.remove('down'); sh.classList.remove('down'); void ball.offsetWidth;
    ball.classList.add('up'); sh.classList.add('up');

    const success = rng() < Math.max(0.18, 0.80 - (level-1)*0.08);
    setTimeout(()=>{
      ball.classList.remove('up'); sh.classList.remove('up');
      if(success){
        netGlow.style.opacity=1; setTimeout(()=>netGlow.style.opacity=0, 160);
        ball.classList.add('down'); sh.classList.add('down');
        setTimeout(()=>{ score++; RENDER(); if(score % target===0) nextLevel(); anim=false; }, 440);
      } else { anim=false; fail(); }
    }, 580);
  }

  function showOverlay(t,sub){ $('ovTitle').textContent=t; $('ovText').textContent=sub; overlay.style.display='grid'; }
  function hideOverlay(){ overlay.style.display='none'; }

  continueBtn.onclick=()=>{ lives=1; hideOverlay(); RENDER(); };
  restartBtn.onclick=()=>{ level=1; score=0; lives=3; target=3; hideOverlay(); RENDER(); };
  shootBtn.onclick=shoot;
</script>
</body>
</html>
